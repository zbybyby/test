/*! 2016 Baidu Inc. All Rights Reserved */
define("common/cache",["require"],function(require){var e={},t="userInfo";return{setBatch:function(e){e||(e={});for(var t in e)if(e.hasOwnProperty(t))this.set(t,e[t])},set:function(t,i){return e[t]=i,this},get:function(t){return e[t]},clear:function(){return e={},this},remove:function(t){if(t)delete e[t];return this},setUserInfo:function(e){this.set(t,e||{})},getUserInfo:function(e){var i=this.get(t)||{};return e?i[e]:i},getUserGroup:function(){var e=this.getUserInfo();return{name:e.groupName,isOwner:e.isGroupOwner}},userHasGroup:function(){return!!this.getUserInfo().hasGroup},userIsGroupOwner:function(){return this.getUserInfo().isGroupOwner},setUserGroupName:function(e){this.getUserInfo().groupName=e},isUserStudent:function(){return this.getUserInfo("isStudent")}}}),define("common/page_9c1894bc",["require","bootstrap/collapse","bootstrap/dropdown","common/cache"],function(require){function e(e){var t=$(window).scrollTop()>100;e[t?"fadeIn":"fadeOut"]()}function t(){var t='<a id="gotop" style="display: none;"><span class="glyphicon glyphicon-menu-up up-icon" aria-hidden="true"></span></a>',i=$(t).appendTo(document.body);i.on("click",function(){$(document.body).stop().animate({scrollTop:0},200)}),$(window).on("scroll",$.proxy(e,this,i)),e(i)}require("bootstrap/collapse"),require("bootstrap/dropdown");var i=require("common/cache");return{init:function(e,n){i.setUserInfo(e),n&&t()}}}),define("note/noteDetail_9fb33293",["require","common/page_9c1894bc","bootstrap/modal"],function(require){function e(e){e.show(),setTimeout(function(){e.hide()},2e3)}var t=require("common/page_9c1894bc"),exports=(require("bootstrap/modal"),{});return exports.init=function(i,n){t.init(i,!0);var a=$(".hide-modal-btn"),r=$(".hide-btn");if(a)a.bind("click",function(t){t.preventDefault(),$.post("/note/hide",{noteId:n},"json").then(function(t){if(0===t.status)e($(".hide-sus")),r.removeClass("enable"),r.removeAttr("data-toggle"),r.removeAttr("data-target");else e($(".hide-fail"))},function(){e($(".hide-fail"))})});$(".support-btn").bind("click",function(e){var t=$(this),i=t.hasClass("light"),a=t.attr("data-role"),r=i?3:"up"===a?1:2,s=t.siblings(".support-btn");$.post("/note/support",{noteId:n,support:r},function(e){if(0===e.status){t.toggleClass("light");var i=$("."+a+"-num"),n=Number(i.html());if(3===r)i.html(n-1);else if(1===r){i.html(n+1);var o=$(".down-num"),l=Number(o.html());if(s.hasClass("light"))s.removeClass("light"),o.html(l-1)}else{i.html(n+1);var u=$(".up-num"),d=Number(u.html());if(s.hasClass("light"))s.removeClass("light"),u.html(d-1)}}},"json")}),$("#delModal").find(".del-btn").bind("click",function(){$.post("/note/delete",{noteId:n},"json").then(function(t){if(0===t.status)window.location.href="/note/all";else e($(".del-fail"))},function(){e($(".del-fail"))})})},exports});